USE bendy;

DROP TABLE IF EXISTS zipcodes CASCADE;

-- "CASCADE" means drop any constraints that other
-- tables may have on this table when it is deleted 
CREATE TABLE zipcodes (
  zip      INT(5),
  city     VARCHAR(30),
  PRIMARY KEY (zip));

DROP TABLE IF EXISTS employees CASCADE;
CREATE TABLE employees (
  eno      INT(4) NOT NULL PRIMARY KEY, 
  ename   VARCHAR(30),
  zip      INT(5) REFERENCES zipcodes,
  hdate   DATE);

DROP TABLE IF EXISTS parts CASCADE;
CREATE TABLE parts(
  pno      INT(5) NOT NULL PRIMARY KEY,
  pname    VARCHAR(30),
  qoh     INTEGER CHECK(qoh >= 0),
  price    DOUBLE(6,2) CHECK(price >= 0.0),
  olevel   INT);

DROP TABLE IF EXISTS customers CASCADE;
CREATE TABLE customers (
  cno      INT(5) NOT NULL PRIMARY KEY,
  cname   VARCHAR(30),
  street   VARCHAR(30),
  zip      INT(5) REFERENCES zipcodes,
  phone    CHAR(12));
 
DROP TABLE IF EXISTS orders CASCADE;
CREATE TABLE orders (
  ono     INT(5) NOT NULL PRIMARY KEY AUTO_INCREMENT,
  cno      INT(5) REFERENCES customers,
  eno      INT(4) REFERENCES employees,
  received DATE,
  shipped  DATE);

DROP TABLE IF EXISTS odetails CASCADE;
CREATE TABLE odetails (
  ono     INT(5) NOT NULL REFERENCES orders,
  pno      INT(5) NOT NULL REFERENCES parts,
  qty      INTEGER CHECK(qty > 0),
  PRIMARY KEY (ono, pno));

INSERT INTO  zipcodes(zip, city)
  VALUES(67226,'WICHITA');

INSERT INTO  zipcodes VALUES
  (60606,'FORT DODGE');
INSERT INTO  zipcodes VALUES
  (50302,'KANSAS city');
INSERT INTO  zipcodes VALUES
  (54444,'COLUMBIA');
INSERT INTO  zipcodes VALUES
  (66002,'LIBERAL');
INSERT INTO  zipcodes VALUES
  (61111,'FORT HAYS');

INSERT INTO employees VALUES
  (1000,'JONES',67226,'1995-12-12');
INSERT INTO employees VALUES
  (1001,'SMITH',60606,'1992-1-10');
INSERT INTO employees VALUES
  (1002,'BROWN',50302,'1994-9-1');

INSERT INTO parts VALUES
  (10506,'LAND BEFORE TIME I',200,19.99,20);
INSERT INTO parts VALUES
  (10507,'LAND BEFORE TIME II',156,19.99,20);
INSERT INTO parts VALUES
  (10508,'LAND BEFORE TIME III',190,19.99,20); 
INSERT INTO parts VALUES
  (10509,'LAND BEFORE TIME IV',60,19.99,20);
INSERT INTO parts VALUES
  (10601,'SLEEPING BEAUTY',300,24.99,20);
INSERT INTO parts VALUES
  (10701,'WHEN HARRY MET SALLY',120,19.99,30);
INSERT INTO parts VALUES
  (10800,'DIRTY HARRY',140,14.99,30);
INSERT INTO parts VALUES
  (10900,'DR. ZHIVAGO',100,24.99,30);

INSERT INTO  customers VALUES
  (1111,'CHARLES','123 MAIN ST.',67226,'316-636-5555');
INSERT INTO customers VALUES
  (2222,'BERTRAM','237 ASH AVENUE',67226,'316-689-5555');
INSERT INTO customers VALUES
  (3333,'BARBARA','111 INWOOD ST.',60606,'316-111-1234');

INSERT INTO orders VALUES
  (1020,1111,1000,'1994-12-10','1994-12-12');
INSERT INTO orders VALUES
  (1021,1111,1000,'1995-1-12','1995-1-15');
INSERT INTO orders VALUES
  (1022,2222,1001,'1995-2-13','1995-2-20');
INSERT INTO orders VALUES
  (1023,3333,1000,'1997-6-20',NULL);

INSERT INTO odetails VALUES
  (1020,10506,1);
INSERT INTO odetails VALUES
  (1020,10507,1);
INSERT INTO odetails VALUES
  (1020,10508,2);
INSERT INTO odetails VALUES
  (1020,10509,3);
INSERT INTO odetails VALUES
  (1021,10601,4);
INSERT INTO odetails VALUES
  (1022,10601,1);
INSERT INTO odetails VALUES
  (1022,10701,1);
INSERT INTO odetails VALUES
  (1023,10800,1);
INSERT INTO odetails VALUES
  (1023,10900,1);